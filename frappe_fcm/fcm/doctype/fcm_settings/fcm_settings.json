{
  "actions": [],
  "allow_rename": 0,
  "creation": "2025-01-01 00:00:00",
  "doctype": "DocType",
  "engine": "InnoDB",
  "field_order": [
    "fcm_instructions_html",
    "fcm_section",
    "fcm_enabled",
    "fcm_project_id",
    "fetch_shared_credentials_btn",
    "column_break_fcm",
    "fcm_service_account_json",
    "mobile_app_section",
    "google_services_json",
    "parse_google_services_btn",
    "column_break_mobile",
    "fcm_sender_id",
    "fcm_api_key",
    "fcm_app_id",
    "fcm_test_section",
    "fcm_connection_status",
    "frappe_integration_section",
    "auto_send_on_notification",
    "send_for_system_notification",
    "column_break_frappe",
    "send_for_email_notification",
    "frappe_integration_info",
    "notification_section",
    "notification_channel_id",
    "default_notification_title",
    "column_break_notification",
    "default_notification_icon",
    "default_sound",
    "advanced_section",
    "send_async",
    "retry_failed",
    "column_break_advanced",
    "max_retries",
    "log_notifications"
  ],
  "fields": [
    {
      "fieldname": "fcm_instructions_html",
      "fieldtype": "HTML",
      "label": "Setup Instructions",
      "options": "<div style=\"background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px; margin-bottom: 20px;\"><h3 style=\"margin: 0 0 10px 0; font-size: 24px;\">Firebase Cloud Messaging Setup</h3><p style=\"margin: 0; opacity: 0.9;\">Use your own Firebase project with the universal mobile app</p></div><div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 15px; margin-bottom: 20px;\"><div style=\"background: #fff; border: 2px solid #4caf50; border-radius: 8px; padding: 15px; box-shadow: 0 2px 4px rgba(0,0,0,0.05);\"><div style=\"display: flex; align-items: center; margin-bottom: 10px;\"><span style=\"background: #4caf50; color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-right: 10px;\">1</span><strong style=\"color: #2e7d32;\">Firebase Setup</strong></div><ul style=\"margin: 0; padding-left: 20px; color: #555; font-size: 13px; line-height: 1.6;\"><li>Create project at <a href=\"https://console.firebase.google.com\" target=\"_blank\">Firebase Console</a></li><li>Generate Service Account JSON</li><li>Paste below and Save</li></ul></div><div style=\"background: #fff; border: 1px solid #e0e0e0; border-radius: 8px; padding: 15px; box-shadow: 0 2px 4px rgba(0,0,0,0.05);\"><div style=\"display: flex; align-items: center; margin-bottom: 10px;\"><span style=\"background: #ff9800; color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-right: 10px;\">2</span><strong style=\"color: #e65100;\">Mobile App Config</strong></div><ul style=\"margin: 0; padding-left: 20px; color: #555; font-size: 13px; line-height: 1.6;\"><li>Download <b>google-services.json</b></li><li>Paste in Mobile App section below</li><li>Click <b>Parse & Extract Values</b></li></ul></div><div style=\"background: #fff; border: 1px solid #e0e0e0; border-radius: 8px; padding: 15px; box-shadow: 0 2px 4px rgba(0,0,0,0.05);\"><div style=\"display: flex; align-items: center; margin-bottom: 10px;\"><span style=\"background: #2196f3; color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-right: 10px;\">3</span><strong style=\"color: #1565c0;\">Install & Login</strong></div><ul style=\"margin: 0; padding-left: 20px; color: #555; font-size: 13px; line-height: 1.6;\"><li>Download APK from <a href=\"https://github.com/ahmedemamhatem/frappe_fcm/releases\" target=\"_blank\">GitHub Releases</a></li><li>Enter your site URL</li><li>Login with Frappe credentials</li></ul></div></div><div style=\"background: #e8f5e9; border-left: 4px solid #4caf50; padding: 12px; border-radius: 4px; margin-bottom: 15px;\"><strong style=\"color: #2e7d32;\">Your Own Firebase:</strong> <span style=\"color: #555;\">Each site uses its own Firebase project. The mobile app fetches config dynamically from your site!</span></div>"
    },
    {
      "fieldname": "fcm_section",
      "fieldtype": "Section Break",
      "label": "Firebase Configuration"
    },
    {
      "default": "0",
      "description": "Enable FCM push notifications",
      "fieldname": "fcm_enabled",
      "fieldtype": "Check",
      "label": "Enable FCM",
      "in_list_view": 1
    },
    {
      "depends_on": "fcm_enabled",
      "description": "Found in Firebase Console → Project Settings → General",
      "fieldname": "fcm_project_id",
      "fieldtype": "Data",
      "label": "Firebase Project ID",
      "mandatory_depends_on": "fcm_enabled"
    },
    {
      "depends_on": "fcm_enabled",
      "fieldname": "fetch_shared_credentials_btn",
      "fieldtype": "Button",
      "label": "Fetch Shared Credentials",
      "description": "Use the shared Firebase credentials for the universal mobile app"
    },
    {
      "fieldname": "column_break_fcm",
      "fieldtype": "Column Break"
    },
    {
      "depends_on": "fcm_enabled",
      "description": "Paste the full JSON content from the downloaded service account key file",
      "fieldname": "fcm_service_account_json",
      "fieldtype": "Code",
      "label": "Service Account JSON",
      "options": "JSON"
    },
    {
      "fieldname": "mobile_app_section",
      "fieldtype": "Section Break",
      "label": "Mobile App Configuration",
      "description": "Configuration for the universal mobile app. Paste your google-services.json here.",
      "collapsible": 1,
      "depends_on": "fcm_enabled"
    },
    {
      "fieldname": "google_services_json",
      "fieldtype": "Code",
      "label": "Google Services JSON",
      "options": "JSON",
      "description": "Paste the contents of google-services.json from Firebase Console → Project Settings → Your Apps → Android"
    },
    {
      "fieldname": "parse_google_services_btn",
      "fieldtype": "Button",
      "label": "Parse & Extract Values",
      "description": "Extract FCM configuration values from google-services.json"
    },
    {
      "fieldname": "column_break_mobile",
      "fieldtype": "Column Break"
    },
    {
      "fieldname": "fcm_sender_id",
      "fieldtype": "Data",
      "label": "FCM Sender ID",
      "description": "Auto-extracted from google-services.json (project_number)",
      "read_only": 1
    },
    {
      "fieldname": "fcm_api_key",
      "fieldtype": "Data",
      "label": "FCM API Key",
      "description": "Auto-extracted from google-services.json (current_key)",
      "read_only": 1
    },
    {
      "fieldname": "fcm_app_id",
      "fieldtype": "Data",
      "label": "FCM App ID",
      "description": "Auto-extracted from google-services.json (mobilesdk_app_id)",
      "read_only": 1
    },
    {
      "fieldname": "fcm_test_section",
      "fieldtype": "Section Break",
      "label": "Connection Status"
    },
    {
      "fieldname": "fcm_connection_status",
      "fieldtype": "HTML",
      "label": "Status"
    },
    {
      "fieldname": "frappe_integration_section",
      "fieldtype": "Section Break",
      "label": "Frappe Notification Integration"
    },
    {
      "default": "1",
      "description": "Automatically send push notification when Frappe Notifications trigger",
      "fieldname": "auto_send_on_notification",
      "fieldtype": "Check",
      "label": "Auto Send on Frappe Notification"
    },
    {
      "default": "1",
      "depends_on": "auto_send_on_notification",
      "fieldname": "send_for_system_notification",
      "fieldtype": "Check",
      "label": "Send for System Notifications"
    },
    {
      "fieldname": "column_break_frappe",
      "fieldtype": "Column Break"
    },
    {
      "default": "1",
      "depends_on": "auto_send_on_notification",
      "fieldname": "send_for_email_notification",
      "fieldtype": "Check",
      "label": "Send for Email Notifications"
    },
    {
      "fieldname": "frappe_integration_info",
      "fieldtype": "HTML",
      "label": "Info",
      "options": "<div style=\"background: #e8f5e9; padding: 12px; border-radius: 6px; border-left: 4px solid #4caf50; margin-top: 10px;\"><p style=\"margin: 0 0 8px 0; color: #2e7d32; font-weight: 600;\">How it works:</p><ul style=\"margin: 0; padding-left: 20px; color: #555; font-size: 13px;\"><li>When Frappe Notification triggers, FCM push is sent to the recipient</li><li>Only users with registered mobile devices receive notifications</li><li>Control FCM per-notification using <b>Send FCM Push</b> checkbox in Notification rules</li></ul></div>"
    },
    {
      "fieldname": "notification_section",
      "fieldtype": "Section Break",
      "label": "Notification Defaults",
      "collapsible": 1
    },
    {
      "default": "frappe_fcm_notifications",
      "description": "Android notification channel ID",
      "fieldname": "notification_channel_id",
      "fieldtype": "Data",
      "label": "Channel ID"
    },
    {
      "default": "Notification",
      "description": "Default title when none provided",
      "fieldname": "default_notification_title",
      "fieldtype": "Data",
      "label": "Default Title"
    },
    {
      "fieldname": "column_break_notification",
      "fieldtype": "Column Break"
    },
    {
      "description": "Android drawable resource name",
      "fieldname": "default_notification_icon",
      "fieldtype": "Data",
      "label": "Default Icon"
    },
    {
      "default": "default",
      "description": "Sound name or 'default'",
      "fieldname": "default_sound",
      "fieldtype": "Data",
      "label": "Default Sound"
    },
    {
      "collapsible": 1,
      "fieldname": "advanced_section",
      "fieldtype": "Section Break",
      "label": "Advanced Settings"
    },
    {
      "default": "1",
      "description": "Send notifications in background (recommended)",
      "fieldname": "send_async",
      "fieldtype": "Check",
      "label": "Send Asynchronously"
    },
    {
      "default": "1",
      "description": "Retry failed notifications automatically",
      "fieldname": "retry_failed",
      "fieldtype": "Check",
      "label": "Retry Failed"
    },
    {
      "fieldname": "column_break_advanced",
      "fieldtype": "Column Break"
    },
    {
      "default": "3",
      "depends_on": "retry_failed",
      "description": "Maximum retry attempts",
      "fieldname": "max_retries",
      "fieldtype": "Int",
      "label": "Max Retries"
    },
    {
      "default": "1",
      "description": "Log all notification attempts to FCM Notification Log",
      "fieldname": "log_notifications",
      "fieldtype": "Check",
      "label": "Log Notifications"
    }
  ],
  "index_web_pages_for_search": 1,
  "issingle": 1,
  "links": [
    {
      "link_doctype": "FCM Device",
      "link_fieldname": "name"
    },
    {
      "link_doctype": "FCM Notification Log",
      "link_fieldname": "name"
    }
  ],
  "modified": "2025-01-01 00:00:00",
  "modified_by": "Administrator",
  "module": "FCM",
  "name": "FCM Settings",
  "naming_rule": "Expression",
  "owner": "Administrator",
  "permissions": [
    {
      "create": 1,
      "delete": 1,
      "email": 1,
      "print": 1,
      "read": 1,
      "role": "System Manager",
      "share": 1,
      "write": 1
    }
  ],
  "sort_field": "modified",
  "sort_order": "DESC",
  "states": [],
  "track_changes": 1
}
